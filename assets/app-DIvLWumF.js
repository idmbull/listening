import{D as t,S as s}from"./index-BP5dWznL.js";import{l as d,b as r,i as c,c as f,r as i,d as u,s as p,f as g,e as S}from"./drag-drop-CVudGZn6.js";let n;function C(){g(s.getSource().html),t.textInput.disabled=!0}async function L(){await d("reading"),t.playlistSelect.value&&await r(t.playlistSelect.value,"reading"),c(),m(),n=new f("reading",{onReset:C,onLoadContent:async e=>{await r(e,"reading")},onSectionChange:e=>u(e),onActionStart:()=>{},onCtrlSpaceSingle:()=>i(),onCtrlSpaceDouble:()=>i()}),window.currentController=n,n.reset()}function m(){t.fileLoaderBtn&&(t.fileLoaderBtn.onclick=()=>t.fileLoader.click(),t.fileLoader.onchange=e=>{const a=e.target.files[0];l(a)},p(t.fileLoaderBtn,e=>{const a=e.find(o=>/\.(txt|md|json)$/i.test(o.name));a&&l(a)},"Drop Text File!"))}function l(e){if(!e)return;const a=new FileReader;a.onload=async o=>{await S(o.target.result,e.name,"reading"),n.reset()},a.readAsText(e)}export{L as initReadingMode};
